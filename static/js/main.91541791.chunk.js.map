{"version":3,"sources":["services/apiService.jsx","components/Searchbar/Searchbar.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","App.jsx","index.jsx"],"names":["fetchImages","searchQuery","page","a","fetch","rawResult","ok","json","result","Searchbar","state","value","changeHandler","e","setState","target","submitHandler","preventDefault","props","onSubmit","trim","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGallery","images","map","image","index","webformatURL","showImageHandle","showImageHandler","largeImageURL","id","Button","onClick","loadMoreHandler","Loader","color","height","width","modalRoot","document","querySelector","Modal","keyDownHandler","code","onClose","overlayClickHandler","event","currentTarget","window","addEventListener","removeEventListener","createPortal","src","fullImageURL","alt","App","isLoading","openModal","error","maxPages","newElementHight","closeModal","imageUrl","scrollToHandler","setTimeout","scrollTo","top","documentElement","scrollHeight","behavior","searchImagesHandler","total","Math","ceil","totalHits","hits","console","toString","min","onSubmitHandler","searchString","prevProps","prevState","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.91541791.chunk.js","sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '11753469-fae5ae7c0c549b8c5c7373ba2';\n\nconst fetchImages = async (searchQuery, page) => {\n  const rawResult = await fetch(\n    `${BASE_URL}?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n\n  if (!rawResult.ok) {\n    throw rawResult;\n  }\n\n  const result = await rawResult.json();\n\n  return result;\n};\n\nexport default fetchImages;\n","import { Component } from 'react';\n\nclass Searchbar extends Component {\n  state = {\n    value: '',\n  };\n\n  changeHandler = e => {\n    this.setState({ value: e.target.value });\n  };\n\n  submitHandler = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.value.trim());\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.changeHandler}\n            value={this.state.value}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n// import { React, Component } from 'react';\n// // import PixabayFetchFunc from '../../services/apiSearchImg';\n// class Searchbar extends Component {\n//   state = {\n//     value: '',\n//   };\n//   changeHandler = e => {\n//     this.setState({ value: e.target.value });\n//   };\n\n//   submitHandler = e => {\n//     e.preventDefault();\n//     this.props.onSubmit(this.state.value.trim().toLowerCase());\n//   };\n\n//   render() {\n//     const { value } = this.state;\n//     // console.log(value);\n//     return (\n//       <header className=\"Searchbar\">\n//         <form className=\"SearchForm\" onSubmit={this.submitHandler}>\n//           <button type=\"submit\" className=\"SearchForm-button\">\n//             <span className=\"SearchForm-button-label\">Search</span>\n//           </button>\n\n//           <input\n//             className=\"SearchForm-input\"\n//             type=\"text\"\n//             onChange={this.changeHandler}\n//             value={value}\n//             // autocomplete=\"off\"\n//             // autofocus\n//             placeholder=\"Search images and photos\"\n//           />\n//         </form>\n//       </header>\n//     );\n//   }\n// }\n\n// export default Searchbar;\n","import { Component } from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  // componentDidUpdate(prevProps, prevState) {\n  //   console.log('list Update');\n  //   window.scrollTo({\n  //     top: document.documentElement.scrollHeight,\n  //     behavior: 'smooth',\n  //   });\n  // }\n  render() {\n    return (\n      <ul className=\"ImageGallery\">\n        {this.props.images.map((image, index) => {\n          return (\n            <ImageGalleryItem\n              key={image.id}\n              webformatURL={image.webformatURL}\n              showImageHandle={this.props.showImageHandler(image.largeImageURL)}\n              index={index}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import { Component } from 'react';\n\nclass Button extends Component {\n  render() {\n    return (\n      <button\n        type=\"button\"\n        className=\"Button\"\n        onClick={this.props.loadMoreHandler}\n      >\n        Load more\n      </button>\n    );\n  }\n}\nexport default Button;\n","import Spinner from 'react-loader-spinner';\n\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nconst Loader = () => {\n  return (\n    <div className=\"Loader\">\n      <Spinner type=\"Bars\" color=\"#3f51b5\" height={60} width={120} />\n    </div>\n  );\n};\n\nexport default Loader;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.keyDownHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.keyDownHandler);\n  }\n\n  keyDownHandler = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  overlayClickHandler = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.overlayClickHandler}>\n        <div className=\"Modal\">\n          <img src={this.props.fullImageURL} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport './styles.css';\n\nimport fetchImages from './services/apiService';\nimport Searchbar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery/ImageGallery';\nimport Button from './components/Button/Button';\nimport Loader from './components/Loader/Loader';\nimport Modal from './components/Modal/Modal';\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchQuery: '',\n    page: 1,\n    isLoading: false,\n    openModal: false,\n    error: '',\n  };\n\n  maxPages = 0;\n  fullImageURL = '';\n  newElementHight = 0;\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      (prevState.searchQuery !== this.state.searchQuery &&\n        this.state.searchQuery !== '') ||\n      prevState.page !== this.state.page\n    ) {\n      this.searchImagesHandler();\n      // this.scrollToHandler();\n    }\n    if (\n      prevState.images.length !== this.state.images.length &&\n      prevState.images.length !== 0\n    ) {\n      // console.log('scrollToHandler App DidUpdate');\n      this.scrollToHandler();\n    }\n  }\n\n  closeModal = () => {\n    this.fullImageURL = '';\n    this.setState({ openModal: false });\n  };\n\n  showImageHandler = imageUrl => () => {\n    this.fullImageURL = imageUrl;\n    this.setState({ openModal: true });\n  };\n\n  scrollToHandler = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }, 750);\n  };\n\n  searchImagesHandler = async () => {\n    const { searchQuery, page } = this.state;\n    this.setState({ isLoading: true, error: '' });\n    try {\n      const result = await fetchImages(searchQuery, page);\n\n      if (result.total !== 0) {\n        this.maxPages = Math.ceil(result.totalHits / 12);\n\n        this.setState(({ images }) => ({\n          images: [...images, ...result.hits],\n        }));\n      } else {\n        // console.log('Not found');\n        this.setState(() => ({\n          images: [],\n          error: 'No results were found for your search.',\n        }));\n      }\n    } catch (error) {\n      console.error(error);\n      this.setState(() => ({ error: error.toString() }));\n    } finally {\n      this.setState({ isLoading: false });\n\n      // this.scrollToHandler();\n    }\n  };\n\n  loadMoreHandler = () => {\n    this.setState(() => ({\n      page: Math.min(this.maxPages, this.state.page + 1),\n    }));\n  };\n\n  onSubmitHandler = searchString => {\n    this.maxPages = 0;\n\n    this.setState(() => ({\n      images: [],\n      searchQuery: searchString,\n      page: 1,\n    }));\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSubmitHandler} />\n        {this.state.error ? (\n          <p className=\"ErrorText\">{this.state.error}</p>\n        ) : (\n          <ImageGallery\n            images={this.state.images}\n            showImageHandler={this.showImageHandler}\n            scrollToHandler={this.scrollToHandler}\n          />\n        )}\n\n        {this.state.isLoading && <Loader />}\n        {this.state.page < this.maxPages && (\n          <Button loadMoreHandler={this.loadMoreHandler} />\n        )}\n        {this.state.openModal && (\n          <Modal\n            fullImageURL={this.fullImageURL}\n            onClose={this.closeModal}\n          ></Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n// // import './App.css';\n// import './styles.css';\n// import { Component } from 'react';\n// import Searchbar from './components/Searchbar/Searchbar';\n// import axios from 'axios';\n// console.dir(axios);\n// // import PixabayFetchFunc from '../../services/apiSearchImg';\n//     const searchQuery = 'dog';\n// const searchPage = 1;\n//   const BASE_URL = 'https://pixabay.com/api/';\n//   const API_KEY = '23145424-17de0e2191faefedd106abc58';\n//   axios.defaults.baseURL = BASE_URL;\n\n//   const searchPhotos = () => {\n//      let url = `?q=${searchQuery}&page=${searchPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n//     axios\n//       .get(url)\n//       .then(result => {\n//         console.log(result);\n//       })\n//       .catch(err => {\n//         console.log(err);\n//       });\n//   };\n\n// console.log(\"searchPhotos\", searchPhotos(searchQuery, searchPage));\n\n// class App extends Component {\n//   // handlerSearchSubmit = () => {};\n//   handlerSearchSubmit = searchForm => {\n//     this.maxPages = 0;\n//     // console.log(object);\n//     this.setState(() => ({\n//       images: [],\n//       searchQuery: searchForm,\n//       searchPage: 1,\n//     }));\n//   };\n\n//  render() {\n//     // console.log(BASE_URL);\n//     return (\n//       <div className=\"App\">\n//         <Searchbar onSubmit={this.handlerSearchSubmit} searchQuery={this.searchQuery} searchPage={this.searchPage} />\n//         {/* <Searchbar /> */}\n//       </div>\n//     );\n//   }\n// }\n\n// export default App;\n\n// // https://github.com/flamesty/goit-react-hw-03-image-finder\n// // https://learn-reactjs.ru/basics/forms\n// // https://pixabay.com/api/docs/\n// // https://github.com/mhnpd/react-loader-spinner\n// // https://pixabay.com/api/?q=что_искать&page=номер_страницы&key=твой_ключ&image_type=photo&orientation=horizontal&per_page=12\n// // let searchPage = 1;\n// // let searchQuery = 'banana';\n// // let searchPer_page = 12;\n// // let url = `?q=${searchQuery}&page=${searchPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${searchPer_page} `;\n// // let endpoint = 'searcItem';\n// // console.dir(axios);\n\n// // const searcItem = 'search';\n// // const resultRequest = axios.get(\n// //   `${BASE_URL}?q=${searcItem}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n// // );\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './index.css';\r\nimport '../src/styles.css';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}